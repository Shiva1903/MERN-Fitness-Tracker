{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\somus\\\\Main Project\\\\frontend\\\\src\\\\components\\\\EditableExerciseRow.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useExerciseContext } from '../hooks/useExerciseContext';\nimport { useAuthContext } from '../hooks/useAuthContext';\nimport ColorSelect from './ColorSelect';\nimport Dot from \"./Dot\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditableExerciseRow(_ref) {\n  _s();\n\n  let {\n    exercise,\n    setError\n  } = _ref;\n  const [isEdit, setIsEdit] = useState(false);\n  const [name, setName] = useState(exercise.name);\n  const [color, setColor] = useState(exercise.color);\n  const {\n    dispatch\n  } = useExerciseContext();\n  const {\n    user\n  } = useAuthContext();\n  const editRef = useRef();\n  const formRef = useRef();\n\n  const handleChange = e => {\n    setName(e.target.value);\n    console.log(name);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setError(null);\n\n    const fetchData = async () => {\n      if (!name || !color) {\n        setError(\"Fields must not be empty\");\n        return;\n      }\n\n      const response = await fetch(\"/api/exercise/\" + exercise._id, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${user.token}`\n        },\n        body: JSON.stringify({\n          name,\n          color\n        })\n      });\n      const result = await response.json();\n\n      if (!response.ok) {\n        setError(result.error);\n      } else {\n        console.log(result);\n        dispatch({\n          type: \"UPDATE_EXERCISE\",\n          payload: result\n        });\n        setIsEdit(false);\n      }\n    };\n\n    fetchData();\n  };\n\n  const handleClickEdit = () => {\n    setIsEdit(true);\n  };\n\n  const handleClickClose = () => {\n    setIsEdit(false);\n  };\n\n  const handleClickDelete = () => {\n    fetch(\"/api/exercise/\" + exercise._id, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${user.token}`\n      }\n    }).then(response => {\n      if (!response.ok) {\n        response.json().then(result => {\n          setError(result.error);\n        });\n      } else {\n        dispatch({\n          type: \"DELETE_EXERCISE\",\n          payload: exercise\n        });\n      }\n    }).catch(e => console.log(e));\n  };\n\n  const handleClickOutside = e => {\n    const clickInMenu = e.target.id ? e.target.id.includes(\"react-select\") : null;\n\n    if (formRef.current && !editRef.current.contains(e.target) && !formRef.current.contains(e.target) && !clickInMenu) {\n      setIsEdit(false);\n    }\n  };\n\n  const handleKeyDown = e => {\n    if (e.key === \"Enter\") {\n      if (!name) {\n        return;\n      }\n\n      fetch(\"/api/exercise/\" + exercise._id, {\n        method: \"PATCH\",\n        headers: {\n          \"Authorization\": `Bearer ${user.token}`\n        },\n        body: JSON.stringify({\n          name,\n          color\n        })\n      });\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', handleClickOutside);\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEdit ? /*#__PURE__*/_jsxDEV(\"form\", {\n        ref: formRef,\n        className: \"editable-form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"editable-input\",\n          value: name,\n          onChange: handleChange,\n          autoFocus: true,\n          onKeyDown: handleKeyDown\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(ColorSelect, {\n          setColor: setColor,\n          className: \"editable-input-select\",\n          initialValue: exercise.color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"editable-form-btn\",\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"dot\",\n        children: [exercise.name, \" \", /*#__PURE__*/_jsxDEV(Dot, {\n          color: exercise.color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 51\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"options\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: isEdit ? handleClickClose : handleClickEdit,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            ref: editRef,\n            children: isEdit ? \"close\" : \"edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClickDelete,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            children: \"delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 47\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditableExerciseRow, \"0wYiNClRqN1Jq4TplhrDlB0cRgM=\", false, function () {\n  return [useExerciseContext, useAuthContext];\n});\n\n_c = EditableExerciseRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditableExerciseRow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useExerciseContext","useAuthContext","ColorSelect","Dot","EditableExerciseRow","exercise","setError","isEdit","setIsEdit","name","setName","color","setColor","dispatch","user","editRef","formRef","handleChange","e","target","value","console","log","handleSubmit","preventDefault","fetchData","response","fetch","_id","method","headers","token","body","JSON","stringify","result","json","ok","error","type","payload","handleClickEdit","handleClickClose","handleClickDelete","then","catch","handleClickOutside","clickInMenu","id","includes","current","contains","handleKeyDown","key","document","addEventListener","removeEventListener"],"sources":["C:/Users/somus/Main Project/frontend/src/components/EditableExerciseRow.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport { useExerciseContext } from '../hooks/useExerciseContext';\r\nimport { useAuthContext } from '../hooks/useAuthContext';\r\nimport ColorSelect from './ColorSelect';\r\nimport Dot from \"./Dot\"\r\n\r\nexport default function EditableExerciseRow({ exercise, setError }) {\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [name, setName] = useState(exercise.name)\r\n  const [color, setColor] = useState(exercise.color);\r\n  const { dispatch } = useExerciseContext()\r\n  const { user } = useAuthContext()\r\n\r\n  const editRef = useRef()\r\n  const formRef = useRef()\r\n\r\n  const handleChange = (e) => {\r\n    setName(e.target.value)\r\n    console.log(name)\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    setError(null)\r\n\r\n    const fetchData = async () => {\r\n      if (!name || !color) {\r\n        setError(\"Fields must not be empty\")\r\n        return\r\n      }\r\n\r\n      const response = await fetch(\"/api/exercise/\" + exercise._id, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": `Bearer ${user.token}`\r\n          },\r\n        body: JSON.stringify({ name, color })\r\n      })\r\n\r\n      const result = await response.json()\r\n\r\n      if (!response.ok) {\r\n        setError(result.error)\r\n      } else {\r\n        console.log(result)\r\n        dispatch({ type: \"UPDATE_EXERCISE\", payload: result })\r\n        setIsEdit(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  } \r\n\r\n  const handleClickEdit = () => {\r\n    setIsEdit(true)\r\n  }\r\n\r\n  const handleClickClose = () => {\r\n    setIsEdit(false)\r\n  }\r\n\r\n  const handleClickDelete = () => {\r\n    fetch(\"/api/exercise/\" + exercise._id, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Authorization\": `Bearer ${user.token}`\r\n      }\r\n    })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        response.json().then((result) => { setError(result.error) })\r\n      } else {\r\n        dispatch({ type: \"DELETE_EXERCISE\", payload: exercise })\r\n      }\r\n    })\r\n    .catch(e => console.log(e))\r\n\r\n    \r\n  }\r\n\r\n  const handleClickOutside = (e) => {\r\n    const clickInMenu = e.target.id ? e.target.id.includes(\"react-select\") : null\r\n    if (formRef.current && !editRef.current.contains(e.target) && !formRef.current.contains(e.target) && !clickInMenu) {\r\n      setIsEdit(false)\r\n    }\r\n  }\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      if (!name) {\r\n        return\r\n      }\r\n      fetch(\"/api/exercise/\" + exercise._id, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Authorization\": `Bearer ${user.token}`\r\n        },\r\n        body: JSON.stringify({\r\n          name,\r\n          color\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', handleClickOutside)\r\n    return () => {document.removeEventListener('click', handleClickOutside)}\r\n  }, [])\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        {\r\n          isEdit\r\n          ? <form ref={formRef} className='editable-form' onSubmit={handleSubmit}>\r\n              <input \r\n                className=\"editable-input\" \r\n                value={name} \r\n                onChange={handleChange} \r\n                autoFocus \r\n                onKeyDown={handleKeyDown}\r\n              />\r\n              <ColorSelect \r\n                setColor={setColor}\r\n                className={\"editable-input-select\"}\r\n                initialValue={exercise.color}\r\n              />\r\n              <button className='editable-form-btn'>Save Changes</button>\r\n            </form>\r\n          : <span className='dot'>{exercise.name} <Dot color={exercise.color} /> </span>\r\n        }\r\n      </td>\r\n      <td className='options'>\r\n        <span>\r\n          <button onClick={isEdit ? handleClickClose : handleClickEdit}>\r\n            <span className=\"material-symbols-outlined\" ref={editRef}>\r\n              {\r\n                isEdit\r\n                ? \"close\"\r\n                : \"edit\"\r\n              }\r\n            </span>\r\n          </button>\r\n          <button onClick={handleClickDelete}><span className=\"material-symbols-outlined\">delete</span></button>\r\n        </span>\r\n      </td>\r\n    </tr>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}