{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\somus\\\\Main Project\\\\frontend\\\\src\\\\components\\\\EditableGoalRow.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport Select from 'react-select';\nimport { useGoalContext } from '../hooks/useGoalContext';\nimport { useAuthContext } from '../hooks/useAuthContext';\nimport { useWorkoutContext } from '../hooks/useWorkoutContext';\nimport { useGetWeekDates } from '../hooks/useGetWeekDates';\nimport ExerciseSelect from './ExerciseSelect';\nimport TimeInput from './TimeInput';\nimport Dot from \"./Dot\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst goalTypeOptions = [{\n  label: \"Frequency\",\n  value: \"frequency\"\n}, {\n  label: \"Time\",\n  value: \"time\"\n}];\nexport default function EditableGoalRow(_ref) {\n  _s();\n\n  let {\n    goal,\n    setError,\n    exercises\n  } = _ref;\n  const [isEdit, setIsEdit] = useState(false);\n  const [goalType, setGoalType] = useState(goal.goal_type);\n  const [time, setTime] = useState(goal.time);\n  const [frequency, setFrequency] = useState(goal.frequency);\n  const [exercise, setExercise] = useState(goal.exercise[0]._id);\n  const [remaining, setRemaining] = useState(0);\n  const {\n    user\n  } = useAuthContext();\n  const {\n    dispatch: dispatchGoal\n  } = useGoalContext();\n  const {\n    dispatch: dispatchWorkout,\n    workouts\n  } = useWorkoutContext();\n  const getWeekDates = useGetWeekDates();\n  const editRef = useRef();\n  const formRef = useRef();\n  useEffect(() => {\n    fetch(\"/api/workout\", {\n      headers: {\n        \"Authorization\": `Bearer ${user.token}`\n      }\n    }).then(response => response.json()).then(result => {\n      dispatchWorkout({\n        type: \"SET_WORKOUTS\",\n        payload: result\n      });\n    });\n  }, [dispatchWorkout, user.token]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    const fetchData = async () => {\n      if (!goalType || !exercise || !time && !frequency) {\n        return;\n      }\n\n      const response = await fetch(\"/api/goals/\" + goal._id, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${user.token}`\n        },\n        body: JSON.stringify({\n          goal_type: goalType,\n          time,\n          frequency,\n          exercise\n        })\n      });\n      const result = await response.json();\n\n      if (!response.ok) {\n        setError(result.error);\n      } else {\n        console.log(result);\n        dispatchGoal({\n          type: \"UPDATE_GOAL\",\n          payload: result\n        });\n        setIsEdit(false);\n      }\n    };\n\n    fetchData();\n  };\n\n  const handleChangeExercise = e => {\n    setExercise(e.value);\n  };\n\n  const handleChangeFrequency = e => {\n    setFrequency(e.target.value);\n  };\n\n  const handleClickEdit = () => {\n    setIsEdit(true);\n  };\n\n  const handleClickClose = () => {\n    setIsEdit(false);\n  };\n\n  const handleClickDelete = () => {\n    fetch(\"/api/goals/\" + goal._id, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${user.token}`\n      }\n    }).catch(e => console.log(e));\n    dispatchGoal({\n      type: \"DELETE_GOAL\",\n      payload: goal\n    });\n  };\n\n  const findRemaining = useCallback((exercise, goalType) => {\n    const [startDate, endDate] = getWeekDates();\n    let workoutTotalTime = 0;\n    let workoutTotalFrequency = 0;\n    const weeklyWorkouts = workouts.filter(workout => {\n      const date = new Date(workout.createdAt);\n      return workout.exercise[0]._id === exercise[0]._id && date > startDate && date < endDate;\n    });\n    weeklyWorkouts.forEach(workout => {\n      if (goalType === \"time\") {\n        workoutTotalTime += workout.time;\n      } else {\n        workoutTotalFrequency++;\n      }\n    });\n\n    if (goalType === \"time\") {\n      return workoutTotalTime;\n    } else {\n      return workoutTotalFrequency;\n    }\n  }, [getWeekDates, workouts]);\n\n  const handleClickOutside = e => {\n    const clickInMenu = e.target.id ? e.target.id.includes(\"react-select\") : null;\n\n    if (formRef.current && !editRef.current.contains(e.target) && !formRef.current.contains(e.target) && !clickInMenu) {\n      setIsEdit(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', handleClickOutside);\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, []);\n\n  const handleChangeGoalType = e => {\n    setGoalType(e.value);\n  };\n\n  useEffect(() => {\n    let remainingData;\n\n    if (goalType === \"time\") {\n      setFrequency(0);\n      remainingData = time - findRemaining(goal.exercise, goalType);\n    } else {\n      setTime(0);\n      remainingData = frequency - findRemaining(goal.exercise, goalType);\n    }\n\n    setRemaining(remainingData);\n  }, [goalType, findRemaining, time, frequency]);\n  const formattedGoalType = goal.goal_type[0].toUpperCase() + goal.goal_type.slice(1);\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    ref: formRef,\n    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEdit ? /*#__PURE__*/_jsxDEV(ExerciseSelect, {\n        exercises: exercises,\n        onChange: handleChangeExercise,\n        defaultValue: {\n          label: goal.exercise[0].name,\n          value: goal.exercise[0]._id\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"dot\",\n        children: [goal.exercise[0].name, \" \", /*#__PURE__*/_jsxDEV(Dot, {\n          color: goal.exercise[0].color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 59\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEdit ? /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"editable-form\",\n        onSubmit: () => {},\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group flex-row\",\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            options: goalTypeOptions,\n            onChange: handleChangeGoalType,\n            defaultValue: {\n              label: formattedGoalType,\n              value: goalType\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: formattedGoalType\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: goalType === \"time\" ? \"editable-form-time\" : null,\n      children: isEdit ? /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"editable-form\",\n        onSubmit: () => {},\n        children: [goalType === \"time\" && /*#__PURE__*/_jsxDEV(TimeInput, {\n          time: time,\n          setTime: setTime,\n          noLabel: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }, this), goalType === \"frequency\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group time-form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"frequency-input\",\n            type: \"number\",\n            onChange: handleChangeFrequency,\n            value: frequency,\n            placeholder: \"# times / week\",\n            min: \"0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: goal.goal_type === \"time\" ? `${goal.time} minutes` : `${goal.frequency} times`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"editable-form editable-form-last\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: remaining <= 0 ? \"success\" : \"danger\",\n          children: [remaining, \" \", goalType === \"time\" ? remaining === 1 ? \"minute\" : \"minutes\" : remaining === 1 ? \"time\" : \"times\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), isEdit ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"editable-form-btn\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 15\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"options\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: isEdit ? handleClickClose : handleClickEdit,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            ref: editRef,\n            children: isEdit ? \"close\" : \"edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClickDelete,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            children: \"delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 47\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditableGoalRow, \"1oRQ2wdxrLHgSejlqDxOPsyyFjM=\", false, function () {\n  return [useAuthContext, useGoalContext, useWorkoutContext, useGetWeekDates];\n});\n\n_c = EditableGoalRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditableGoalRow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Select","useGoalContext","useAuthContext","useWorkoutContext","useGetWeekDates","ExerciseSelect","TimeInput","Dot","goalTypeOptions","label","value","EditableGoalRow","goal","setError","exercises","isEdit","setIsEdit","goalType","setGoalType","goal_type","time","setTime","frequency","setFrequency","exercise","setExercise","_id","remaining","setRemaining","user","dispatch","dispatchGoal","dispatchWorkout","workouts","getWeekDates","editRef","formRef","fetch","headers","token","then","response","json","result","type","payload","handleSubmit","e","preventDefault","fetchData","method","body","JSON","stringify","ok","error","console","log","handleChangeExercise","handleChangeFrequency","target","handleClickEdit","handleClickClose","handleClickDelete","catch","findRemaining","startDate","endDate","workoutTotalTime","workoutTotalFrequency","weeklyWorkouts","filter","workout","date","Date","createdAt","forEach","handleClickOutside","clickInMenu","id","includes","current","contains","document","addEventListener","removeEventListener","handleChangeGoalType","remainingData","formattedGoalType","toUpperCase","slice","name","color"],"sources":["C:/Users/somus/Main Project/frontend/src/components/EditableGoalRow.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react'\r\nimport Select from 'react-select'\r\nimport { useGoalContext } from '../hooks/useGoalContext';\r\nimport { useAuthContext } from '../hooks/useAuthContext';\r\nimport { useWorkoutContext } from '../hooks/useWorkoutContext';\r\nimport { useGetWeekDates } from '../hooks/useGetWeekDates';\r\nimport ExerciseSelect from './ExerciseSelect';\r\nimport TimeInput from './TimeInput';\r\n\r\nimport Dot from \"./Dot\"\r\n\r\nconst goalTypeOptions = [\r\n  {\r\n    label: \"Frequency\",\r\n    value: \"frequency\"\r\n  },\r\n  {\r\n    label: \"Time\",\r\n    value: \"time\"\r\n  }\r\n]\r\n\r\nexport default function EditableGoalRow({ goal, setError, exercises }) {\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [goalType, setGoalType] = useState(goal.goal_type)\r\n  const [time, setTime] = useState(goal.time)\r\n  const [frequency, setFrequency] = useState(goal.frequency)\r\n  const [exercise, setExercise] = useState(goal.exercise[0]._id)\r\n  const [remaining, setRemaining] = useState(0)\r\n\r\n  const { user } = useAuthContext()\r\n  const { dispatch: dispatchGoal } = useGoalContext()\r\n  const { dispatch: dispatchWorkout, workouts } = useWorkoutContext()\r\n  const getWeekDates =  useGetWeekDates()\r\n\r\n  const editRef = useRef()\r\n  const formRef = useRef()\r\n\r\n  useEffect(() => {\r\n    fetch(\"/api/workout\", {\r\n      headers: {\r\n        \"Authorization\": `Bearer ${user.token}`\r\n      }\r\n    })\r\n    .then((response) => response.json())\r\n    .then((result) => {\r\n      dispatchWorkout({ type: \"SET_WORKOUTS\", payload: result })\r\n    })\r\n  }, [dispatchWorkout, user.token])\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    const fetchData = async () => {\r\n      if (!goalType || !exercise || (!time && !frequency)) {\r\n        return\r\n      }\r\n\r\n      const response = await fetch(\"/api/goals/\" + goal._id, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Authorization\": `Bearer ${user.token}`\r\n        },\r\n        body: JSON.stringify({\r\n          goal_type: goalType,\r\n          time,\r\n          frequency,\r\n          exercise,\r\n        })\r\n      })\r\n\r\n      const result = await response.json()\r\n\r\n      if (!response.ok) {\r\n        setError(result.error)\r\n      } else {\r\n        console.log(result)\r\n        dispatchGoal({ type: \"UPDATE_GOAL\", payload: result })\r\n        setIsEdit(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  } \r\n\r\n  const handleChangeExercise = (e) => {\r\n    setExercise(e.value)\r\n  }\r\n\r\n  const handleChangeFrequency = (e) => {\r\n    setFrequency(e.target.value)\r\n  }\r\n\r\n  const handleClickEdit = () => {\r\n    setIsEdit(true)\r\n  }\r\n\r\n  const handleClickClose = () => {\r\n    setIsEdit(false)\r\n  }\r\n\r\n  const handleClickDelete = () => {\r\n    fetch(\"/api/goals/\" + goal._id, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Authorization\": `Bearer ${user.token}`\r\n      }\r\n    })\r\n    .catch(e => console.log(e))\r\n\r\n    dispatchGoal({ type: \"DELETE_GOAL\", payload: goal })\r\n  }\r\n\r\n  const findRemaining = useCallback((exercise, goalType) => {\r\n    const [startDate, endDate] = getWeekDates()\r\n    let workoutTotalTime = 0;\r\n    let workoutTotalFrequency = 0;\r\n\r\n    const weeklyWorkouts = workouts.filter((workout) => {\r\n      const date = new Date(workout.createdAt)\r\n      return (workout.exercise[0]._id === exercise[0]._id && date > startDate && date < endDate)\r\n    })\r\n\r\n    weeklyWorkouts.forEach((workout) => {\r\n      if (goalType === \"time\") {\r\n        workoutTotalTime += workout.time\r\n      } else {\r\n        workoutTotalFrequency++\r\n      }\r\n    })\r\n    \r\n    if (goalType === \"time\") {\r\n      return workoutTotalTime\r\n    } else {\r\n      return workoutTotalFrequency\r\n    }\r\n  }, [getWeekDates, workouts])\r\n\r\n  const handleClickOutside = (e) => {\r\n    const clickInMenu = e.target.id ? e.target.id.includes(\"react-select\") : null\r\n    if (formRef.current && !editRef.current.contains(e.target) && !formRef.current.contains(e.target) && !clickInMenu) {\r\n      setIsEdit(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', handleClickOutside)\r\n    return () => {document.removeEventListener('click', handleClickOutside)}\r\n  }, [])\r\n\r\n  const handleChangeGoalType = (e) => {\r\n    setGoalType(e.value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    let remainingData\r\n\r\n    if (goalType === \"time\") {\r\n      setFrequency(0)\r\n      remainingData = time - findRemaining(goal.exercise, goalType)\r\n    } else {\r\n      setTime(0)\r\n      remainingData = frequency - findRemaining(goal.exercise, goalType)\r\n    }\r\n\r\n    setRemaining(remainingData)\r\n  }, [goalType, findRemaining, time, frequency])\r\n\r\n  const formattedGoalType = goal.goal_type[0].toUpperCase() + goal.goal_type.slice(1)\r\n\r\n  return (\r\n    <tr ref={formRef}>\r\n      <td>\r\n        {\r\n          isEdit\r\n          ? <ExerciseSelect \r\n            exercises={exercises}\r\n            onChange={handleChangeExercise}\r\n            defaultValue={{label: goal.exercise[0].name, value: goal.exercise[0]._id}}\r\n          />\r\n          : <span className='dot'>{goal.exercise[0].name} <Dot color={goal.exercise[0].color} /> </span>\r\n        }\r\n      </td>\r\n      <td>\r\n        {\r\n          isEdit\r\n          ? <form className='editable-form' onSubmit={() => {}}>\r\n              <div className='form-group flex-row'>\r\n                <Select \r\n                  options={goalTypeOptions}\r\n                  onChange={handleChangeGoalType}\r\n                  defaultValue={{label: formattedGoalType, value: goalType}}\r\n                />\r\n              </div>\r\n            </form>\r\n          : <span>{formattedGoalType}</span>\r\n        }\r\n      </td>\r\n      <td className={ goalType === \"time\" ? \"editable-form-time\" : null}>\r\n        {\r\n          isEdit\r\n          ? <form \r\n              className=\"editable-form\"\r\n              onSubmit={() => {}}\r\n            >\r\n              {\r\n                goalType === \"time\"\r\n                &&\r\n                <TimeInput \r\n                  time={time}\r\n                  setTime={setTime}\r\n                  noLabel={true}\r\n                />\r\n              }\r\n              {\r\n                goalType === \"frequency\"\r\n                &&\r\n                <div className='form-group time-form-group'>\r\n                  <input \r\n                    className='frequency-input'\r\n                    type=\"number\"\r\n                    onChange={handleChangeFrequency}\r\n                    value={frequency}\r\n                    placeholder=\"# times / week\"\r\n                    min=\"0\"\r\n                  />\r\n                </div>\r\n              }\r\n            </form>\r\n          : <span>{goal.goal_type === \"time\" ? `${goal.time} minutes` : `${goal.frequency} times`}</span>\r\n        }\r\n      </td>\r\n      \r\n      <td>\r\n        <form className='editable-form editable-form-last' onSubmit={handleSubmit}>\r\n          {\r\n            <span className={remaining <= 0 ? \"success\" : \"danger\"}> \r\n              {remaining} {goalType === \"time\" ? remaining === 1 ? \"minute\" : \"minutes\" : remaining === 1 ? \"time\" : \"times\"}\r\n            </span>\r\n          }\r\n          {\r\n            isEdit\r\n            ? <button className='editable-form-btn'>Save</button>\r\n            : null\r\n          }\r\n          \r\n        </form>\r\n      </td>\r\n\r\n      <td className='options'>\r\n        <span>\r\n          <button onClick={isEdit ? handleClickClose : handleClickEdit}>\r\n            <span className=\"material-symbols-outlined\" ref={editRef}>\r\n              {\r\n                isEdit\r\n                ? \"close\"\r\n                : \"edit\"\r\n              }\r\n            </span>\r\n          </button>\r\n          <button onClick={handleClickDelete}><span className=\"material-symbols-outlined\">delete</span></button>\r\n        </span>\r\n      </td>\r\n    </tr>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}