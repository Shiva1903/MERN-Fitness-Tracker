{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\somus\\\\Main Project\\\\frontend\\\\src\\\\components\\\\EditableWorkoutRow.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useWorkoutContext } from '../hooks/useWorkoutContext';\nimport { useAuthContext } from '../hooks/useAuthContext';\nimport Dot from \"./Dot\";\nimport TimeInput from './TimeInput';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditableWorkoutRow(_ref) {\n  _s();\n\n  let {\n    workout,\n    setError\n  } = _ref;\n  const [isEdit, setIsEdit] = useState(false);\n  const [name, setName] = useState(workout.exercise[0].name);\n  const [time, setTime] = useState(workout.time);\n  const {\n    dispatch\n  } = useWorkoutContext();\n  const {\n    user\n  } = useAuthContext();\n  const editRef = useRef();\n  const formRef = useRef();\n\n  const handleChangeName = e => {\n    setName(e.target.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    const fetchData = async () => {\n      if (!name || !time) {\n        setError(\"Fields must not be empty\");\n        return;\n      }\n\n      const response = await fetch(\"/api/workout/\" + workout._id, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${user.token}`\n        },\n        body: JSON.stringify({\n          name,\n          time,\n          exerciseID: workout.exercise[0]._id\n        })\n      });\n      const result = await response.json();\n\n      if (!response.ok) {\n        setError(result.error);\n      } else {\n        dispatch({\n          type: \"UPDATE_WORKOUT\",\n          payload: result\n        });\n        setIsEdit(false);\n      }\n    };\n\n    fetchData();\n  };\n\n  const handleClickEdit = () => {\n    setIsEdit(true);\n  };\n\n  const handleClickClose = () => {\n    setIsEdit(false);\n  };\n\n  const handleClickDelete = () => {\n    fetch(\"/api/workout/\" + workout._id, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${user.token}`\n      }\n    }).catch(e => console.log(e));\n    dispatch({\n      type: \"DELETE_WORKOUT\",\n      payload: workout\n    });\n  };\n\n  const handleClickOutside = e => {\n    if (formRef.current && !editRef.current.contains(e.target) && !formRef.current.contains(e.target)) {\n      setIsEdit(false);\n    }\n  };\n\n  const handleKeyDown = e => {\n    if (e.key === \"Enter\") {\n      handleSubmit(e);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', handleClickOutside);\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, []);\n\n  const getDate = dateString => {\n    const date = new Date(dateString);\n    return date;\n  };\n\n  const options = {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  };\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    ref: formRef,\n    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n      children: getDate(workout.createdAt).toLocaleDateString(undefined, options)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEdit ? /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"editable-form\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"editable-input\",\n          value: name,\n          onChange: handleChangeName,\n          autoFocus: true,\n          onKeyDown: handleKeyDown\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"dot\",\n        children: [workout.exercise[0].name, \" \", /*#__PURE__*/_jsxDEV(Dot, {\n          color: workout.exercise[0].color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 64\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEdit ? /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"editable-form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(TimeInput, {\n          time: time,\n          setTime: setTime\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"editable-form-btn\",\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [workout.time, \" \", workout.time === 1 ? \"minute\" : \"minutes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"options\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: isEdit ? handleClickClose : handleClickEdit,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-symbols-outlined\",\n          ref: editRef,\n          children: isEdit ? \"close\" : \"edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClickDelete,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-symbols-outlined\",\n          children: \"delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)]\n  }, workout._id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditableWorkoutRow, \"XOJPMtg379Ndb55AXIususaiARs=\", false, function () {\n  return [useWorkoutContext, useAuthContext];\n});\n\n_c = EditableWorkoutRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditableWorkoutRow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useWorkoutContext","useAuthContext","Dot","TimeInput","EditableWorkoutRow","workout","setError","isEdit","setIsEdit","name","setName","exercise","time","setTime","dispatch","user","editRef","formRef","handleChangeName","e","target","value","handleSubmit","preventDefault","fetchData","response","fetch","_id","method","headers","token","body","JSON","stringify","exerciseID","result","json","ok","error","type","payload","handleClickEdit","handleClickClose","handleClickDelete","catch","console","log","handleClickOutside","current","contains","handleKeyDown","key","document","addEventListener","removeEventListener","getDate","dateString","date","Date","options","weekday","year","month","day","createdAt","toLocaleDateString","undefined","color"],"sources":["C:/Users/somus/Main Project/frontend/src/components/EditableWorkoutRow.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport { useWorkoutContext } from '../hooks/useWorkoutContext';\r\nimport { useAuthContext } from '../hooks/useAuthContext';\r\nimport Dot from \"./Dot\"\r\nimport TimeInput from './TimeInput';\r\n\r\nexport default function EditableWorkoutRow({ workout, setError }) {\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [name, setName] = useState(workout.exercise[0].name)\r\n  const [time, setTime] = useState(workout.time);\r\n  const { dispatch } = useWorkoutContext()\r\n  const { user } = useAuthContext()\r\n\r\n  const editRef = useRef()\r\n  const formRef = useRef()\r\n\r\n  const handleChangeName = (e) => {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    const fetchData = async () => {\r\n      if (!name || !time) {\r\n        setError(\"Fields must not be empty\")\r\n        return\r\n      }\r\n\r\n      const response = await fetch(\"/api/workout/\" + workout._id, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": `Bearer ${user.token}`\r\n          },\r\n        body: JSON.stringify({ name, time, exerciseID: workout.exercise[0]._id })\r\n      })\r\n\r\n      const result = await response.json()\r\n\r\n      if (!response.ok) {\r\n        setError(result.error)\r\n      } else {\r\n        dispatch({ type: \"UPDATE_WORKOUT\", payload: result })\r\n        setIsEdit(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  } \r\n\r\n  const handleClickEdit = () => {\r\n    setIsEdit(true)\r\n  }\r\n\r\n  const handleClickClose = () => {\r\n    setIsEdit(false)\r\n  }\r\n\r\n  const handleClickDelete = () => {\r\n    fetch(\"/api/workout/\" + workout._id, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Authorization\": `Bearer ${user.token}`\r\n      }\r\n    })\r\n    .catch(e => console.log(e))\r\n\r\n    dispatch({ type: \"DELETE_WORKOUT\", payload: workout })\r\n  }\r\n\r\n  const handleClickOutside = (e) => {\r\n    if (formRef.current && !editRef.current.contains(e.target) && !formRef.current.contains(e.target)) {\r\n      setIsEdit(false)\r\n    }\r\n  }\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      handleSubmit(e)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', handleClickOutside)\r\n    return () => {document.removeEventListener('click', handleClickOutside)}\r\n  }, [])\r\n\r\n  const getDate = (dateString) => {\r\n    const date = new Date(dateString)\r\n    return date\r\n  }\r\n\r\n  const options = { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' };\r\n\r\n  return (\r\n    <tr key={workout._id} ref={formRef}>\r\n      <td>{getDate(workout.createdAt).toLocaleDateString(undefined, options)}</td>\r\n      <td>\r\n        {\r\n          isEdit\r\n            ? <form className='editable-form' onSubmit={handleSubmit}>\r\n                <input \r\n                  className=\"editable-input\" \r\n                  value={name} \r\n                  onChange={handleChangeName} \r\n                  autoFocus \r\n                  onKeyDown={handleKeyDown}\r\n                />\r\n              </form>\r\n            : <span className='dot'>{workout.exercise[0].name} <Dot color={workout.exercise[0].color}/> </span>\r\n        }\r\n      </td>\r\n      <td>\r\n        {\r\n          isEdit\r\n          ? <form className='editable-form' onSubmit={handleSubmit}>\r\n              <TimeInput \r\n                time={time}\r\n                setTime={setTime}\r\n              />\r\n              <button className='editable-form-btn'>Save Changes</button>\r\n            </form>\r\n          : <span>{workout.time} {workout.time === 1 ? \"minute\" : \"minutes\"}</span>\r\n        }\r\n      </td>\r\n      <td className='options'>\r\n        <button onClick={isEdit ? handleClickClose : handleClickEdit}>\r\n          <span className=\"material-symbols-outlined\" ref={editRef}>\r\n            {\r\n              isEdit\r\n              ? \"close\"\r\n              : \"edit\"\r\n            }\r\n          </span>\r\n        </button>\r\n        <button onClick={handleClickDelete}><span className=\"material-symbols-outlined\">delete</span></button>\r\n      </td>\r\n    </tr>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}